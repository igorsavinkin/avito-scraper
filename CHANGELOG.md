# –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –í–µ—Ä—Å–∏—è 2.0 - –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (—Ç–µ–∫—É—â–∞—è)

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- ‚úÖ –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å: —Å–±–æ—Ä —Å—Å—ã–ª–æ–∫ ‚Üí –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–∞–ø—ã –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å

### üìä –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞ `apartment_links` (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è):**
- `id` - ID –∑–∞–ø–∏—Å–∏
- `url` - URL –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `is_parsed` - –§–ª–∞–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `created_at` - –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

**–¢–∞–±–ª–∏—Ü–∞ `apartments` (–æ—Å–Ω–æ–≤–Ω–∞—è):**
- `id` - ID –∑–∞–ø–∏—Å–∏
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `url` - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- `price` - –°—Ç–æ–∏–º–æ—Å—Ç—å
- `media_url_1` - –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–µ –º–µ–¥–∏–∞
- `media_url_2` - –°—Å—ã–ª–∫–∞ –Ω–∞ –≤—Ç–æ—Ä–æ–µ –º–µ–¥–∏–∞
- `media_url_3` - –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç—Ä–µ—Ç—å–µ –º–µ–¥–∏–∞
- `about_apartment` - –û –∫–≤–∞—Ä—Ç–∏—Ä–µ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- `rules` - –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
- `address` - –ê–¥—Ä–µ—Å
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `owner_name` - –ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `owner_url` - –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `created_at` - –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

### üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ü–æ–ª–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - —Å–±–æ—Ä —Å—Å—ã–ª–æ–∫ + –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫
2. **–°–±–æ—Ä —Å—Å—ã–ª–æ–∫** - —Ç–æ–ª—å–∫–æ —Å–±–æ—Ä URL –æ–±—ä—è–≤–ª–µ–Ω–∏–π
3. **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
5. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥** - –∫—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —ç–º–æ–¥–∑–∏
6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ —Å–±–æ—è—Ö

### üìù –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

**html_parser.py:**
- `parse_apartment_links()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- `parse_apartment_detail()` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `_extract_detail_title()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- `_extract_detail_price()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω—ã
- `_extract_media_urls()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ–¥–∏–∞ (–ø–µ—Ä–≤—ã–µ 3)
- `_extract_about_apartment()` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã
- `_extract_rules()` - –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
- `_extract_address()` - –∞–¥—Ä–µ—Å
- `_extract_description()` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `_extract_owner_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ

**db.py:**
- `insert_apartment_link()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
- `insert_apartment_links_batch()` - –º–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫
- `get_unparsed_links()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- `mark_link_as_parsed()` - –æ—Ç–º–µ—Ç–∫–∞ —Å—Å—ã–ª–∫–∏ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π
- `get_links_count()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Å—ã–ª–∫–∞–º

**main.py:**
- `_collect_apartment_links()` - —ç—Ç–∞–ø 1: —Å–±–æ—Ä —Å—Å—ã–ª–æ–∫
- `_parse_apartment_details()` - —ç—Ç–∞–ø 2: –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –º–µ–Ω—é —Å 7 –æ–ø—Ü–∏—è–º–∏
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### üîß –£–ª—É—á—à–µ–Ω–∏—è

- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (UNIQUE constraint)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ—Ä–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

### üì¶ –°–æ–±–∏—Ä–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ò–∑ –∫–∞—Ç–∞–ª–æ–≥–∞:**
- –°—Å—ã–ª–∫–∏ –Ω–∞ –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

**–ò–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
- –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- –¢–æ—á–Ω–∞—è —Ü–µ–Ω–∞
- –ü–µ—Ä–≤—ã–µ 3 –º–µ–¥–∏–∞-—Ñ–∞–π–ª–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã (–ø–ª–æ—â–∞–¥—å, –∫–æ–º–Ω–∞—Ç—ã –∏ —Ç.–¥.)
- –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
- –¢–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å
- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- –ò–º—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞

---

## –í–µ—Ä—Å–∏—è 1.0 - –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ —á–µ—Ä–µ–∑ Selenium
- –°–±–æ—Ä –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö: title, price, photo_url
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É–∫–∏
- –§–æ–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º –±—Ä–∞—É–∑–µ—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `main.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
- `scraper.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–º
- `html_parser.py` - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- `db.py` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î

