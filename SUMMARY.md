# Avito Parser - Краткое описание

## ✅ Что готово

Полностью функциональный парсер для сайта Avito.ru с возможностью сбора данных об объявлениях о сдаче квартир посуточно.

## 🎯 Основные возможности

1. ✅ **Selenium WebDriver** - автоматизация браузера
2. ✅ **BeautifulSoup4** - парсинг HTML
3. ✅ **SQLite база данных** - хранение данных
4. ✅ **Фоновый режим** - браузер запускается без окна
5. ✅ **Сохранение куки** - защита от блокировок
6. ✅ **ООП структура** - чистый модульный код

## 📁 Файлы проекта

### Основные модули:
- `main.py` - точка входа, интерактивное меню
- `scraper.py` - управление браузером Selenium
- `html_parser.py` - парсинг HTML с BeautifulSoup
- `db.py` - работа с SQLite базой данных

### Установка и настройка:
- `setup.bat` - автоустановка для Windows (CMD)
- `setup.ps1` - автоустановка для Windows (PowerShell)
- `requirements.txt` - список зависимостей
- `check_dependencies.py` - проверка установки

### Документация:
- `README.md` - основная документация
- `INSTALL.md` - инструкция по установке
- `COMMANDS.md` - полезные команды

### Конфигурация:
- `.gitignore` - исключения для Git

## 🚀 Быстрый старт

1. Запустите установку:
   ```cmd
   setup.bat
   ```

2. Запустите парсер:
   ```bash
   python main.py
   ```

3. Выберите опцию "1" для парсинга

## 📊 Собираемые данные

База данных `avito_data.db` содержит:
- **title** - заголовок объявления
- **price** - цена
- **photo_url** - URL фотографии
- **created_at** - дата добавления

## 🔧 Технологии

- **Python 3.7+**
- **Selenium 4.15.2** - автоматизация браузера
- **BeautifulSoup4 4.12.2** - парсинг HTML
- **WebDriver Manager 4.0.1** - автоматическое управление драйверами
- **lxml** (опционально) - ускорение парсинга
- **SQLite** - встроенная база данных

## 🎨 Архитектура

```
┌─────────────┐
│   main.py   │ ← Точка входа
└──────┬──────┘
       │
       ├──────────────────────────────┐
       │                              │
┌──────▼──────┐            ┌──────────▼─────────┐
│ scraper.py  │            │  html_parser.py    │
│ (Selenium)  │───────────▶│  (BeautifulSoup)   │
└─────────────┘            └────────────────────┘
       │                              │
       │                              │
       └──────────┬───────────────────┘
                  │
           ┌──────▼──────┐
           │    db.py    │
           │  (SQLite)   │
           └─────────────┘
```

## 📝 Примеры использования

### Программный запуск
```python
from main import AvitoBot

bot = AvitoBot(headless=True)
bot.run()
bot.show_all_data()
```

### Работа с базой данных
```python
from db import DatabaseManager

db = DatabaseManager()
apartments = db.get_all_apartments()
for apt in apartments:
    print(f"{apt[1]} - {apt[2]}")
```

### Парсинг HTML
```python
from html_parser import AvitoHTMLParser

parser = AvitoHTMLParser(html_content)
apartments = parser.parse_apartments()
```

## 🛡️ Особенности безопасности

- Сохранение куки для избежания блокировок
- Реалистичный User-Agent
- Отключение загрузки изображений
- Имитация прокрутки страницы

## 📌 Важные заметки

1. При первом запуске будет скачан ChromeDriver
2. lxml не обязателен - работает с html.parser
3. База данных создается автоматически
4. Куки сохраняются в `avito_cookies.pkl`

## 🐛 Решение проблем

Смотрите `INSTALL.md` для детальных инструкций по установке и устранению неполадок.

## 📄 Лицензия

Проект создан в образовательных целях. Соблюдайте правила использования сайта Avito.ru.

